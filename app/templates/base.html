<!-- templates/base.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>{% block title %}JobTrends{% endblock %}</title>

  <!-- ê³µí†µ CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/layout.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/components.css') }}">

  <!-- ðŸ“ ROUTES: ëª¨ë“  íŽ˜ì´ì§€ì—ì„œ ê³µí†µìœ¼ë¡œ ì“°ì´ëŠ” ê²½ë¡œ ìƒìˆ˜ -->
  <script>
    window.ROUTES = {
      home: "{{ url_for('main.index') }}",
      trend: "{{ url_for('main.trend') }}",
      insight: "{{ url_for('main.insight') }}",
      mypage: "{{ url_for('main.mypage') }}",
      login: "{{ url_for('auth.login') }}",
      signup: "{{ url_for('auth.signup') }}",
      logout: "{{ url_for('auth.logout') }}",
      dashboard: "{{ url_for('auth.dashboard') }}"
    };
  </script>

  {% block extra_head %}{% endblock %}
</head>
<body>
  <!-- ê³µí†µ ë¡œë” -->
  {% include 'components/loader.html' %}

  <!-- ê³µí†µ í—¤ë” -->
  {% include 'components/header.html' %}

  <!-- ê°œë³„ íŽ˜ì´ì§€ ì½˜í…ì¸  -->
  {% block content %}{% endblock %}

  <!-- ê³µí†µ í‘¸í„° -->
  {% include 'components/footer.html' %}

  <!-- ê³µí†µ ìŠ¤í¬ë¦½íŠ¸ -->
  <script type="module" src="{{ url_for('static', filename='js/common/layoutLoader.js') }}"></script>

  {% block extra_scripts %}{% endblock %}
  <script>
  document.addEventListener('DOMContentLoaded', function() {
      const logoutLink = document.getElementById('logoutLink');
      if (logoutLink) {
          logoutLink.addEventListener('click', function(e) {
              e.preventDefault();
              localStorage.clear();
              sessionStorage.clear();
              fetch(window.ROUTES.logout, { method: 'GET', credentials: 'include' })
                  .then(() => {
                      window.location.href = window.ROUTES.login;
                  });
          });
      }
  });
  </script>
</body>
</html>